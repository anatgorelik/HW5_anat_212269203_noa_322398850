<!DOCTYPE html>
<html lang="he">
<head>
<meta charset="utf-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>תפריט</title>

<style>
        body{
        direction:rtl;
        font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        margin:0;
        padding:20px;
        background-image: url("images/backGrountCoffee.JPG");

        }

        .categoryButton{
            width:56px;
            height: 56px;
            background-color: #2B1B17;
            color: #F5EFE6;
            font-size: 28px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            margin-top: 10px;
            margin-right: 10px;
            align-self: flex-start;                 
        }
        #categoryPart{
            display:none;
            background-image: url("images/pinkBackGround.JPG");
            color: #2B1B17;
            position: fixed;
            top: 1%;
            bottom:1%;
            right: 0px;
            width: 20%;
            height: 98%;
            z-index: 1004;
            border-radius: 15px;
            row-gap: 10px;  
            right: 0.5%;
        }

        #categoryPart div{
          
            font-size: 25px;
            gap:10px;
            border-radius: 15px;
            width: 80%;
        }
        #closeCategory{
            position: absolute;
            top:3%;
            left:3%;
            background-color:#2B1B17 ;
            color: #CBAFB2;
            text-align: center;
            border-radius: 10px;
            font-size: 20px;
            border: none;
        }
        .categoryRows{
            margin-top: 15%;
        }
        #title-friendMember{
            position:fixed;
            top:30px;
            right:100px;
            color:#F5EFE6;
            font-size:40px;
            font-weight:bold;
        }


        #friendMemberPart{
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 25px;
            position: fixed;   
            top: 25%;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            max-width: 900px;
        }
        #friendMemberCard{
            background-image: url("images/card.JPG");
            border-radius: 20px;
            width: 500px;
            height: 230px;
            padding: 20px;
            box-shadow:
               0 4px 10px rgba(0,0,0,0.18),
               0 10px 30px rgba(0,0,0,0.25);               
        }
        #loadMoney{
            color: #2B1B17;
            display: flex;
            justify-content: center;
            gap: 20px;
        }
        #userInsertSum{
            width: 200px;
            height: 35px;
        }
        #loadConfirmBtn{
            background-color: #F5EFE6;
            color: #2B1B17;
            border-radius: 15px;
            width: 75px;
            height: 35px;
            border: none;
            font-size: 17px;
        }
        #insertMoneyTxt{
            color: #F5EFE6;
            font-size: 22px;
            margin-top: 3px;
        }

        #userNameCard{
            font-size: 30px;
            align-items: center;
            text-align: center;
        }
        #currentBalance{
            font-size: 25px;
            text-align: center;
        }
         @media screen and (max-width: 600px) {    

            .categoryButton {
                display: none;
            }
            #friendMemberCard{
                width: 300px;
            }
             #friendMemberPart{
                width: 300px;
             }
            
         }
        

</style>
</head>

<body>
   <div id="categoryPart">
        <input type="button"value="X" id="closeCategory">
        <div class="categoryRows">
            <div id="homeCategory" class="divCategory"><p>בית</p></div>
            <div id="myOrdersCategory" class="divCategory"><p>הזמנות שלי</p></div>
            <div id="menuCategory" class="divCategory"><p>תפריט</p></div>
            <div id="frienMemberCategory" class="divCategory"><p>חבר מועדון</p></div>
            <div id="logOutCategory" class="divCategory"><p>התנתקות</p></div>
        </div>     
    </div>
    <input type="button" class="categoryButton" value="☰">
    <div id="title-friendMember">חבר מועדון</div>

    <div id="friendMemberPart">
         <div id="friendMemberCard">
              <p id="userNameCard"></p>
              <p id="currentBalance">טעינה נוכחית : </p>
         </div>
         <div id="loadMoney">
              <p id="insertMoneyTxt">הכנס סכום לטעינה</p>
              <input type="text" id="userInsertSum">
              <input type="button" id="loadConfirmBtn"value="טען">
        </div>
    </div>

    <script>
    const currentUser = JSON.parse(localStorage.getItem("currentUser"));// משיכת שם משתמש מהזיכרון כדי לכתוב בשם הכרטיס
    const currentUserCardName=document.getElementById("userNameCard");
    let balance=0;////////זה היתרה-ג!!!!!!!!!!
    if(currentUser&&currentUser.name){
        currentUserCardName.innerText="הכרטיס של    "+currentUser.name;
        balance=currentUser.balance;
    }else{
        currentUserCardName="אורח";
    }
    const balanceTxt=document.getElementById("currentBalance");
    balanceTxt.innerText = "טעינה נוכחית: " + balance + " שח";
    
    
    function loadBalance(){//////פוקנציה שתקרא את הסכום שהמתשמש רוצה לטעון
        let sumInput=document.getElementById("userInsertSum");
        let sumMoney=Number(sumInput.value);
        if(sumMoney<0 ||isNaN(sumMoney)){
            sumInput.value = "";
            sumInput.placeholder = "ערך לא תקין";
         }
        else{
            balance+=sumMoney;
            balanceTxt.innerText="טעינה נוכחית: " + balance + " שח";
            sumInput.value = "";
            sumInput.placeholder="";
            if (currentUser) {
            currentUser.balance = balance;
            localStorage.setItem("currentUser", JSON.stringify(currentUser));
            let users = JSON.parse(localStorage.getItem("users")) || [];
            users = users.map(u => u.email === currentUser.email ? currentUser : u);
            localStorage.setItem("users", JSON.stringify(users));
        }
        }
    }
    const btnLoadMoney=document.getElementById("loadConfirmBtn");
    btnLoadMoney.addEventListener("click",()=>{
        loadBalance();
    });

    const btnCloseCategory=document.getElementById("closeCategory");// הכפתור שיסגור את הקטגוריות בצד
    btnCloseCategory.addEventListener("mouseover", () => {
        btnCloseCategory.style.backgroundColor = "#F5EFE6";
        btnCloseCategory.style.color = "#2B1B17";
    });
    btnCloseCategory.addEventListener("mouseleave", () => {
        btnCloseCategory.style.backgroundColor = "#2B1B17";
        btnCloseCategory.style.color = "#F5EFE6";
    });
    const categoryDiv=document.querySelectorAll(".divCategory");// מה שמופיע שחלק של הקטגוריות- המעברים לדפים
    categoryDiv.forEach(box => {
        box.addEventListener("mouseenter", () => {
            box.style.backgroundColor = "#F6DADF"; // ורוד בייבי בהיר
        });

        box.addEventListener("mouseleave", () => {
            box.style.backgroundColor = "transparent"; // חזרה לבסיס
        });
    });
    const categoryBtn=document.querySelector(".categoryButton");// הכפתור שפותח את החלון קטגוריות
    categoryBtn.addEventListener("click",()=>{
        document.getElementById("categoryPart").style.display="block";
    });
    btnCloseCategory.addEventListener("click",()=>{
        document.getElementById("categoryPart").style.display="none";
    });
    document.getElementById("homeCategory").addEventListener("click", ()=>{
        window.location.href = "DashBoard.html";
    });
    document.getElementById("menuCategory").addEventListener("click", ()=>{
        window.location.href = "Menu.html";
    });
    document.getElementById("myOrdersCategory").addEventListener("click", ()=>{
        window.location.href = "MyOrders.html";
    });
     document.getElementById("logOutCategory").addEventListener("click", ()=>{
        window.location.href = "LoginPage.html";
    });

    const loadConfirmation=document.getElementById("loadConfirmBtn");
    loadConfirmation.addEventListener("mouseover",()=>{
        loadConfirmation.style.backgroundColor="#F6DADF";
    })
    loadConfirmation.addEventListener("mouseleave",()=>{
        loadConfirmation.style.backgroundColor="#F5EFE6";
    })
    </script>
</body>
</html>
